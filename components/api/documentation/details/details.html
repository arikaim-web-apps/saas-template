{% if uuid is not empty %}
    {% set route = service('routes').getRouteDetails(uuid) %}
{% endif %}
{% set docs = service('docs').getControllerInfo(route.handler_class,route.handler_method) %}  
{% set auth = (route.auth > 0) ? service('access').getAuthNames(route.auth) : null %}  

<p class="p-4 rounded-lg bg-stone-50">              
    {{ docs.api.description }}
</p>
<div class="p-4 bg-stone-50 rounded-lg">
    <table class="table table-compact w-full">      
        <tbody>
            <tr>
                <td class="font-bold">{{ labels.endpoint }}</td>
                <td>
                    {{ url('',true) }}
                </td>
            </tr>
            <tr>
                <td class="font-bold">{{ labels.method }}</td>
                <td>
                    <div class="badge badge-primary">{{ route.method }}</div>
                </td>
            </tr>
            <tr>
                <td class="font-bold">{{ labels.path }}</td>
                <td>
                    {{ route.pattern }}
                </td>
            </tr>           
            <tr>
                <td class="font-bold">
                    {{ labels.auth }}
                </td>
                <td>
                    {% set auth = route.auth|split(',') %}
                    {% if auth is iterable %}
                        {% for item in auth %}
                        <span class="badge">
                            {{ item|default('none') }}
                        </span>
                        {% endfor %}
                    {% else %}
                        <span class="badge">
                            {{ labels.none }}
                        </span>
                    {% endif %}                                   
                </td>
            </tr>
        </tbody>
    </table>
</div>

{% if docs.api.parameters|length > 0 %}
    {{  component('current>api.documentation.details.params',{ 
            title: labels.params, 
            items: docs.api.parameters 
        }) 
    }}          
{% endif %} 
<div class="p-2">
    {{  component('current>api.documentation.details.example',{ 
            method: route.method,
            api_path : route.pattern 
        }) 
    }}
</div>
{% if docs.response is not empty %}
    <h4 class="p-2 w-full mt-2 font-bold text-md">
        {{ labels.response }}
    </h4>
    <div class="p-4 bg-stone-50 rounded-lg">
        {{  component('tailwind~code',{ 
                language: 'json rounded-lg', 
                hide_copy: true,
                class: 'rounded-lg ',
                trim_space: false,
                content: docs.response.getJson()
            }) 
        }}
    </div>
    {% if docs.response.fields|length > 0 %}
        {{  component('current>api.documentation.details.params',{ 
                title: labels.fields,
                hide_reqired: true, 
                items: docs.response.fields 
            }) 
        }}          
    {% endif %}        
{% endif %}  